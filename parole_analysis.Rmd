---
title: "text_analyses"
output: html_document
date: '2022-05-04'
---

```{r package}
library(readr)
library(tidytext)
library(stringr)
library(tidyverse) 
library(skimr)
library(robotstxt)
library(rvest) 
```

```{r read-data-1}
parole_data <- read_csv("data/proquest_1.csv")
```

```{r read-data-2}
parole_text_1 <- read.delim("data/proquest_2.txt", header = TRUE)
colnames(parole_text_1)[1] <- "id"
```

```{r extract document id}

pattern <- paste(parole_data$StoreId, collapse = "|") # all possible patterns

parole_text_1$StoreId <- as.numeric(str_extract(string = parole_text_1$id, pattern = pattern))

parole_text_article <- parole_text_1 %>% fill(StoreId)

parole_text_article_df <- left_join(parole_text_article, 
                           parole_data,
                           by = "StoreId")

```


```{r change-column name}
colnames(parole_text_article_df)[1] <- "text"
```

```{r clean-data}
#parole_text_1 %>% 
#  select(starts_with("ProQuest document ID"))
#parole_text_2 %>% 
#  select(starts_with("Full text"))
```

```{r keep-text}
full_text_loc <- str_locate(parole_text_1$text, "ProQuest document ID:")
which(full_text_loc[,1] == '1')

subject_loc <- str_locate(parole_text_1$text, "____________________________________________________________")

which(subject_loc[,1] == '1')
```


## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r cars}
summary(cars)
#yeah
```

## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
#test
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
